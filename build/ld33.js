!function e(n,t,r){function o(s,a){if(!t[s]){if(!n[s]){var l="function"==typeof require&&require;if(!a&&l)return l(s,!0);if(i)return i(s,!0);throw new Error("Cannot find module '"+s+"'")}var d=t[s]={exports:{}};n[s][0].call(d.exports,function(e){var t=n[s][1][e];return o(t?t:e)},d,d.exports,e,n,t,r)}return t[s].exports}for(var i="function"==typeof require&&require,s=0;s<r.length;s++)o(r[s]);return o}({1:[function(e,n,t){var r,o,i;i=e("./window.coffee"),o=e("./engine.coffee"),r=function(){function e(e){return this.container=new PIXI.Container,e.width=i.w,e.height=i.h,e.position.x=0,e.position.y=0,this.container.addChild(e),o.render.spriteContainer.addChild(this.container),this}return e}(),n.exports=r},{"./engine.coffee":2,"./window.coffee":11}],2:[function(e,n,t){var r,o,i;r=Matter.Engine,o=e("./matter.coffee"),i=e("./window.coffee"),n.exports=r.create(document.body,{world:{gravity:{x:0,y:0}},enableSleeping:!0,render:{controller:o,options:{width:i.w,height:i.h,wireframes:!1,background:"#ccc",hasBounds:!0}}})},{"./matter.coffee":3,"./window.coffee":11}],3:[function(e,n,t){var r,o,i,s,a;s=Matter.RenderPixi,o=Matter.Common,i=Matter.Composite,r=Matter.Bounds,a=Matter.Vector,s.create=function(e){var n,t,r;return n={controller:s,element:null,canvas:null,options:{width:800,height:600,background:"#fafafa",wireframeBackground:"#222",hasBounds:!1,enabled:!0,wireframes:!0,showSleeping:!0,showDebug:!1,showBroadphase:!1,showBounds:!1,showVelocity:!1,showCollisions:!1,showAxes:!1,showPositions:!1,showAngleIndicator:!1,showIds:!1,showShadows:!1}},t=o.extend(n,e),r=!t.options.wireframes&&"transparent"===t.options.background,t.context=new PIXI.WebGLRenderer(t.options.width,t.options.height,{view:t.canvas,transparent:r,antialias:!0,backgroundColor:e.background}),t.canvas=t.context.view,t.container=new PIXI.Container,t.bounds=t.bounds||{min:{x:0,y:0},max:{x:t.options.width,y:t.options.height}},t.textures={},t.sprites={},t.primitives={},t.spriteContainer=new PIXI.Container,t.textContainer=new PIXI.Container,t.container.addChild(t.spriteContainer),t.container.addChild(t.textContainer),o.isElement(t.element)?t.element.appendChild(t.canvas):o.log('No "render.element" passed, "render.canvas" was not inserted into document.',"warn"),t.canvas.oncontextmenu=function(){return!1},t.canvas.onselectstart=function(){return!1},t},s.clear=function(e){var n,t,r,o,i,s,a,l,d,c;for(t=e.container,c=e.spriteContainer,l=t.children,o=0,s=l.length;s>o;o++)r=l[o],t.removeChild(r);for(d=c.children,i=0,a=d.length;a>i;i++)r=d[i],c.removeChild(r);return n=e.sprites["bg-0"],e.textures={},e.sprites={},e.primitives={},e.sprites["bg-0"]=n,n&&t.addChildAt(n,0),e.container.addChild(e.spriteContainer),e.container.addChild(e.textContainer),e.currentBackground=null,t.scale.set(1,1),t.position.set(0,0)},s.world=function(e){var n,t,o,l,d,c,u,f,g,p,h,w,m,y,x,b,v,C,I,B,M,k,T,P,A,F,X,E,O,S;if(E=e.render,S=e.world,m=E.context,w=E.container,P=E.options,t=i.allBodies(S),n=i.allConstraints(S),h=[],P.wireframes?s.setBackground(E,P.wireframeBackground):s.setBackground(E,P.background),g=E.bounds.max.x-E.bounds.min.x,c=E.bounds.max.y-E.bounds.min.y,u=g/E.options.width,f=c/E.options.height,P.hasBounds){for(y=0,v=t.length;v>y;y++)o=t[y],o.render.sprite.visible=r.overlaps(o.bounds,E.bounds);for(x=0,C=n.length;C>x;x++)p=n[x],l=p.bodyA,d=p.bodyB,A=p.pointA,F=p.pointB,l&&(A=a.add(l.position,p.pointA)),d&&(F=a.add(d.position,p.pointB)),A&&F&&(r.contains(E.bounds,A)||r.contains(E.bounds,F))&&h.push(p);w.scale.set(1/u,1/f),w.position.set(-E.bounds.min.x*(1/u),-E.bounds.min.y*(1/f))}else h=n;for(b=0,I=t.length;I>b;b++)o=t[b],s.body(e,o);for(k=0,B=h.length;B>k;k++)p=h[k],s.constraint(e,p);for(X=E.textContainer.children,T=0,M=X.length;M>T;T++)O=X[T],E.textContainer.addChildAt(O,0);return m.render(w)},n.exports=s},{}],4:[function(e,n,t){var r,o,i,s,a;a=e("./utils.coffee"),r=Matter.Bodies,o=Matter.Body,s=Matter.Vector,i=function(){function e(e,n,t){null==e&&(e=0),null==n&&(n=0),this.body=r.rectangle(e,n,100,100,{mass:100,frictionAir:.25,label:"player",render:{sprite:{texture:"assets/textures/"+t}}}),a.addToWorld(this.body),window.onmousemove=function(e){return function(n){return e.body.angle=a.vectorToAngle(n.x,n.y)}}(this)}return e}(),n.exports=i},{"./utils.coffee":10}],5:[function(e,n,t){var r,o,i;r="assets/",i=r+"textures/",o=PIXI.loader.add("dirt",i+"dirt.png").add("player",i+"player.png"),n.exports=o},{}],6:[function(e,n,t){var r,o,i;o=e("../engine.coffee"),r=Matter.Composite,i=function(e,n){switch(e){case"anger":return console.log("anger"),Matter.Composite.remove(o.world,n.body);case"envy":return console.log("envy");case"gloom":return console.log("gloom");case"gluttony":return console.log("gluttony");case"greed":return console.log("greed");case"lust":return console.log("lust");case"pride":return console.log("pride");case"sloth":return console.log("sloth");case"player":return console.log("player")}},n.exports=i},{"../engine.coffee":2}],7:[function(e,n,t){var r,o,i;i=e("../utils.coffee"),r=Matter.Bodies,o=function(){function e(e,n,t){this.name=e,this.body=r.rectangle(n,t,250,250,{isStatic:!0,label:this.name,render:{sprite:{texture:"assets/textures/sin.png"}}}),i.addToWorld(this.body)}return e}(),n.exports=o},{"../utils.coffee":10}],8:[function(e,n,t){var r,o,i,s,a,l,d,c,u,f,g,p,h,w,m,y,x,b;Matter.RendexPixi=e("./matter.coffee"),i=Matter.Composite,o=Matter.Body,c=Matter.Vector,b=e("./window.coffee"),x=e("./utils.coffee"),f=e("./engine.coffee"),g=e("./resources.coffee"),m=e("./tick.coffee"),a=e("./player.coffee"),r=e("./background.coffee"),d=e("./sin/sin.coffee"),p=e("./sin/manager.coffee"),s=.75,l="normal",y=0,h=[],w=["anger","envy","gloom","gluttony","greed","pride","sloth"],u=[""],b.onkeydown=function(e){return function(e){var n,t,r,u;for(document.getElementById("title").className="animated fadeOut",r=new a(b.w/2,b.h/2,"player/normal.png",.75),Matter.Engine.run(f),n=0,t=w.length;t>n;n++)u=w[n],h.push(new d(u,x.random(-1024,1024),x.random(-1024,1024)));return b.onkeydown=function(e){switch(e.keyCode){case 82:return i.clear(f.world),h=[],setTimeout(function(){var e,n;for(e=0,n=w.length;n>e;e++)u=w[e],h.push(new d(u,x.random(-1024,1024),x.random(-1024,1024)));return r=new a(b.w/2,b.h/2,"player/"+l+".png")},250);case 87:case 38:return o.applyForce(r.body,{x:0,y:0},c.mult(x.vectorFromAngle(r.body.angle),s));case 83:case 40:return o.applyForce(r.body,{x:0,y:0},c.neg(c.mult(x.vectorFromAngle(r.body.angle),s)))}},Matter.Events.on(f,"collisionActive",function(e){var n,t,o,c,g,p,m,y,v,C,I,B,M,k,T;for(I=e.pairs,B=[],g=0,m=I.length;m>g;g++){switch(v=I[g],p=null,v.bodyA.isStatic&&(p=v.bodyA.label),v.bodyB.isStatic&&(p=v.bodyB.label),p){case"anger":console.log("anger"),l="anger",w.splice(w.indexOf("anger"),1),i.clear(f.world),h=[],setTimeout(function(){var e,n;for(e=0,n=w.length;n>e;e++)u=w[e],h.push(new d(u,x.random(-1024,1024),x.random(-1024,1024)));return s=1.5,r=new a(b.w/2,b.h/2,"player/anger.png")},500),f.render.spriteContainer.filters=[],M=new PIXI.filters.RGBSplitFilter,n=new PIXI.filters.BlurFilter,n.blur=10,f.render.spriteContainer.filters=[M,n],x.changeText("тебе гневно, мой странный друг?");break;case"envy":console.log("envy"),l="envy",w.splice(w.indexOf("envy"),1),i.clear(f.world),h=[],setTimeout(function(){var e,n;for(e=0,n=w.length;n>e;e++)u=w[e],h.push(new d(u,x.random(-1024,1024),x.random(-1024,1024)));return s=1,r=new a(b.w/2,b.h/2,"player/envy.png")},500),f.render.spriteContainer.filters=[],n=new PIXI.filters.BlurFilter,n.blur=25,f.render.spriteContainer.filters=[n],x.changeText("из зависти в кресло он вжался и застонал");break;case"gloom":console.log("gloom"),l="gloom",w.splice(w.indexOf("gloom"),1),i.clear(f.world),h=[],setTimeout(function(){var e,n;for(e=0,n=w.length;n>e;e++)u=w[e],h.push(new d(u,x.random(-1024,1024),x.random(-1024,1024)));return s=.75,r=new a(b.w/2,b.h/2,"player/gloom.png")},500),f.render.spriteContainer.filters=[],y=new PIXI.filters.NoiseFilter,y.noise=1,o=new PIXI.filters.GrayFilter,o.gray=1,f.render.spriteContainer.filters=[y,o],x.changeText("уныные пронзило её сердце копьём милосердия");break;case"gluttony":console.log("gluttony"),l="gluttony",w.splice(w.indexOf("gluttony"),1),i.clear(f.world),h=[],setTimeout(function(){var e,n;for(e=0,n=w.length;n>e;e++)u=w[e],h.push(new d(u,x.random(-1024,1024),x.random(-1024,1024)));return s=.5,r=new a(b.w/2,b.h/2,"player/gluttony.png")},500),f.render.spriteContainer.filters=[],T=new PIXI.filters.TwistFilter,T.angle=360,T.radius=100,f.render.spriteContainer.filters=[T],x.changeText("чреву угодны мы иногда");break;case"greed":console.log("greed"),l="greed",w.splice(w.indexOf("greed"),1),i.clear(f.world),h=[],setTimeout(function(){var e,n;for(e=0,n=w.length;n>e;e++)u=w[e],h.push(new d(u,x.random(-1024,1024),x.random(-1024,1024)));return s=.75,r=new a(b.w/2,b.h/2,"player/greed.png")},500),f.render.spriteContainer.filters=[],k=new PIXI.filters.SepiaFilter,k.sepia=1,f.render.spriteContainer.filters=[k],x.changeText("алчность утопила его с золотыми карманами");break;case"lust":console.log("lust"),l="lust",w.splice(w.indexOf("lust"),1),i.clear(f.world),h=[],setTimeout(function(){var e,n;for(e=0,n=w.length;n>e;e++)u=w[e],h.push(new d(u,x.random(-1024,1024),x.random(-1024,1024)));return s=1.5,r=new a(b.w/2,b.h/2,"player/lust.png")},500),f.render.spriteContainer.filters=[],C=new PIXI.filters.PixelateFilter,C.size=10,f.render.spriteContainer.filters=[C],x.changeText("похоти не было предела, а конец был страшен");break;case"pride":console.log("pride"),l="pride",w.splice(w.indexOf("pride"),1),i.clear(f.world),h=[],setTimeout(function(){var e,n;for(e=0,n=w.length;n>e;e++)u=w[e],h.push(new d(u,x.random(-1024,1024),x.random(-1024,1024)));return s=1,r=new a(b.w/2,b.h/2,"player/pride.png")},500),f.render.spriteContainer.filters=[],t=new PIXI.filters.CrossHatchFilter,f.render.spriteContainer.filters=[t],x.changeText("гордыня заслонила ему воздух");break;case"sloth":console.log("sloth"),l="sloth",w.splice(w.indexOf("sloth"),1),i.clear(f.world),h=[],setTimeout(function(){var e,n;for(e=0,n=w.length;n>e;e++)u=w[e],h.push(new d(u,x.random(-1024,1024),x.random(-1024,1024)));return s=.5,r=new a(b.w/2,b.h/2,"player/sloth.png")},500),f.render.spriteContainer.filters=[],c=new PIXI.filters.InvertFilter,f.render.spriteContainer.filters=[c],x.changeText("в лени растворился");break;case"player":console.log("player")}document.getElementById("count").textContent=8-w.length+" / 8",B.push(0===w.length?document.getElementById("end").className="animated fadeIn":void 0)}return B}),setInterval(function(){var e;return e=x.random(0,75),f.render.context.backgroundColor=x.rgbToHex(e,e,10)},75),Matter.Events.on(f,"tick",function(e){return y+=.01,Matter.Bounds.shift(f.render.bounds,{x:r.body.position.x-b.w/2,y:r.body.position.y-b.h/2})})}}(this)},{"./background.coffee":1,"./engine.coffee":2,"./matter.coffee":3,"./player.coffee":4,"./resources.coffee":5,"./sin/manager.coffee":6,"./sin/sin.coffee":7,"./tick.coffee":9,"./utils.coffee":10,"./window.coffee":11}],9:[function(e,n,t){var r,o,i,s;s=e("./window.coffee"),i=e("./utils.coffee"),r=e("./engine.coffee"),o=function(e){return console.log(e.body.position.x),Matter.Bounds.shift(r.render.bounds,{x:e.body.position.x-s.w/2,y:e.body.position.y-s.h/2})},n.exports=o},{"./engine.coffee":2,"./utils.coffee":10,"./window.coffee":11}],10:[function(e,n,t){var r,o;r=e("./engine.coffee"),o={random:function(e,n){return Math.floor(Math.random()*(n-e+1)+e)},rgbToHex:function(e,n,t){return"0x"+((1<<24)+(e<<16)+(n<<8)+t).toString(16).slice(1)},changeText:function(e){return document.getElementById("text").textContent=e},vectorFromAngle:function(e){return e-=Math.PI/2,{x:Math.cos(e),y:Math.sin(e)}},vectorToAngle:function(e,n){return Math.atan2(window.h/2-n,window.w/2-e)-Math.PI/2},addToWorld:function(e){return Matter.Composite.add(r.world,e)},removeFromWorld:function(e){return Matter.Composite.remove(r.world,e)}},n.exports=o},{"./engine.coffee":2}],11:[function(e,n,t){window.w=window.innerWidth,window.h=window.innerHeight,n.exports=window},{}]},{},[8]);